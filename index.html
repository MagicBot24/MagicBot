<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>Magic Bot ভাই</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 20px;
      font-family: 'Segoe UI', sans-serif;
      background: #f0f2f5;
      display: flex;
      justify-content: center;
    }
    .container {
      width: 100%;
      max-width: 800px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 20px;
    }
    h1 {
      text-align: center;
      background: linear-gradient(90deg, #ff4081, #7c4dff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2rem;
      margin-bottom: 20px;
    }
    #chat {
      max-height: 500px;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }
    .message {
      padding: 12px 18px;
      border-radius: 18px;
      font-size: 1rem;
      line-height: 1.5;
      white-space: pre-wrap;
      word-wrap: break-word;
      word-break: break-word;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 85%;
      position: relative;
      transition: all 0.3s ease;
    }
    .user {
      background: #4285f4;
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }
    .bot {
      background: #f1f0f0;
      color: #333;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }
    .code-block {
      background: #eee;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      font-family: monospace;
      overflow-x: auto;
      position: relative;
    }
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 10px;
      background: #4285f4;
      color: white;
      border: none;
      padding: 5px 10px;
      font-size: 0.8rem;
      border-radius: 4px;
      cursor: pointer;
    }
    #input-area {
      display: flex;
      margin-top: 15px;
      gap: 10px;
    }
    input {
      flex: 1;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 30px;
      font-size: 1rem;
    }
    button {
      background: #7c4dff;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Magic Bot ভাই</h1>
    <div id="chat"></div>
    <div id="input-area">
      <input type="text" id="queryInput" placeholder="প্রশ্ন লিখুন..." autocomplete="off" />
      <button onclick="searchMagicBot()">Send</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById("chat");

    // ইউজারের মেসেজ যোগ করবে ঠিক আগের মত
    function appendUserMessage(text) {
      const div = document.createElement("div");
      div.className = "message user";
      div.textContent = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Bot এর মেসেজ আস্তে আস্তে দিয়ে দেবে + র‍্যান্ডম স্টাইল যুক্ত
    async function appendBotMessage(text) {
      // মেসেজের বেসিক div বানাও
      const div = document.createElement("div");
      div.className = "message bot";
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;

      // কোড ব্লক টুকরা ধরার জন্য
      const codeRegex = /```([\s\S]*?)```/g;
      let parts = text.split(codeRegex);

      // ফন্ট সাইজ, প্যাডিং আর রেডিয়াসের সম্ভাব্য মান
      const fontSizes = ["0.9rem", "1rem", "1.1rem", "1.2rem", "1.3rem"];
      const paddings = ["10px 15px", "12px 18px", "14px 20px", "16px 22px"];
      const borderRadius = ["12px", "16px", "18px", "20px"];

      for (let i = 0; i < parts.length; i++) {
        if (i % 2 === 1) {
          // কোড ব্লক
          const pre = document.createElement("pre");
          pre.className = "code-block";
          const code = document.createElement("code");
          code.textContent = parts[i];
          pre.appendChild(code);

          const copyBtn = document.createElement("button");
          copyBtn.className = "copy-btn";
          copyBtn.textContent = "Copy";
          copyBtn.onclick = () => navigator.clipboard.writeText(parts[i]);
          pre.appendChild(copyBtn);

          div.appendChild(pre);
        } else {
          // সাধারণ টেক্সট - আস্তে আস্তে যোগ করবো
          await typeTextWithStyle(div, parts[i], fontSizes, paddings, borderRadius);
        }
      }
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // আস্তে আস্তে লেখার ফাংশন + র‍্যান্ডম সাইজিং
    function typeTextWithStyle(container, text, fontSizes, paddings, borderRadius) {
      return new Promise((resolve) => {
        let i = 0;
        const span = document.createElement("span");

        // র‍্যান্ডম সাইজ পিক করে বসানো
        span.style.fontSize = fontSizes[Math.floor(Math.random() * fontSizes.length)];
        span.style.padding = paddings[Math.floor(Math.random() * paddings.length)];
        span.style.borderRadius = borderRadius[Math.floor(Math.random() * borderRadius.length)];

        container.appendChild(span);

        function type() {
          if (i < text.length) {
            span.textContent += text.charAt(i);
            i++;
            chatBox.scrollTop = chatBox.scrollHeight;
            setTimeout(type, 25 + Math.random() * 50); // random typing speed 25-75ms
          } else {
            resolve();
          }
        }
        type();
      });
    }

    // Magic Bot এর মেসেজ, তোমার কন্ডিশনের জন্য সিমুলেটেড র‍্যান্ডম রেসপন্স
    const randomReplies = [
      "হ্যালো! তোমার প্রশ্নের উত্তর দেবো আস্তে আস্তে।",
      "আজকের আবহাওয়া খুব ভালো লাগছে, তাই একটু মজার সাইজে বললাম।",
      "এই রকম একটা র্যান্ডম সাইজের জবাব দেয়া কি তোমার পছন্দ?",
      "আমি Magic Bot ভাই, আস্তে আস্তে কথা বলি।",
      "তোমার প্রশ্নটা আবার বলো, আমি সবার চাইতে আলাদা উত্তর দিবো!",
      "কোড ব্লকও দেখাতে পারি, চাইলে বলো।",
      "এবার একটু ফানি ফানি সাইজে জবাব দিলাম।",
    ];

    async function searchMagicBot() {
      const query = document.getElementById("queryInput").value.trim();
      if (!query) return;

      appendUserMessage(query);

      // আস্তে আস্তে টাইপিং ইফেক্ট দিতে একটু ডিলে দিয়ে বার্তা দেখাবো
      await appendBotMessage("typing...");

      // "typing..." বার্তা মুছে ফেলো
      chatBox.lastChild.remove();

      // র‍্যান্ডম রিপ্লাই বেছে নাও
      const reply = randomReplies[Math.floor(Math.random() * randomReplies.length)];

      // আস্তে আস্তে রিপ্লাই দেখাও
      await appendBotMessage(reply);

      document.getElementById("queryInput").value = "";
    }
  </script>
</body>
</html>
