<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Magic Robot - ‡¶∏‡¶π‡¶ú ‡¶ó‡¶≤‡ßç‡¶™‡ßá Google Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    };
  </script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold text-cyan-400 mb-6">Magic Robot</h1>

  <div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-lg p-6 flex flex-col space-y-4">
    <div id="chat" class="h-96 overflow-y-auto space-y-3 bg-gray-700 p-4 rounded-lg border border-gray-600"></div>
    <div class="flex gap-2">
      <input id="input" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="flex-grow bg-gray-900 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-500 text-white" />
      <button id="sendBtn" class="bg-cyan-600 text-white px-6 py-2 rounded-lg hover:bg-cyan-700 transition">Send</button>
    </div>
  </div>

<script>
  const API_KEY = "AIzaSyCb2Q72UY_t3HB9eOuWo0L5jo5K-LmKCJc";
  const CSE_ID = "b7013f3574abc40c3";

  const chat = document.getElementById("chat");
  const input = document.getElementById("input");
  const sendBtn = document.getElementById("sendBtn");

  function renderMessage(sender, text) {
    const div = document.createElement("div");
    div.classList.add("max-w-[80%]", "px-4", "py-2", "rounded-lg", "text-sm", "whitespace-pre-wrap", "break-words");
    if (sender === "user") {
      div.classList.add("bg-cyan-600", "text-white", "ml-auto");
      div.textContent = `üßë: ${text}`;
    } else {
      div.classList.add("bg-gray-600", "text-white", "mr-auto");
      div.textContent = `ü§ñ: ${text}`;
    }
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  function ownBrainResponse(text) {
    const lower = text.toLowerCase().trim();
    const greetings = ["hi", "hello", "‡¶π‡¶æ‡¶á", "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã", "hola", "hey", "‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞", "‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ"];
    if (greetings.includes(lower)) return "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã! ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã? ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Magic Robot‡•§";
    if (lower.includes("‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶™‡¶æ‡¶∞‡ßã")) return "‡¶Ü‡¶Æ‡¶ø ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶®‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø, ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ö‡¶æ‡¶ì ‡¶¨‡¶≤‡ßá ‡¶¶‡¶æ‡¶ì!";
    if (lower.includes("‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ")) return "‡¶Ü‡¶Æ‡¶ø Magic Robot, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ‡•§";
    return null;
  }

  async function fetchFromGoogle(query) {
    const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CSE_ID}&q=${encodeURIComponent(query)}`;
    try {
      const res = await fetch(url);
      if (!res.ok) throw new Error("HTTP error");
      const data = await res.json();
      if (data.items && data.items.length > 0) {
        let output = "";
        data.items.slice(0, 2).forEach((item, i) => {
          output += `${i+1}. ${item.title}\n${item.snippet.replace(/<\/?[^>]+(>|$)/g, "")}\nLink: ${item.link}\n\n`;
        });
        return output;
      } else {
        return "‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§";
      }
    } catch (err) {
      return "‡¶∏‡¶æ‡¶∞‡ßç‡¶ö‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§";
    }
  }

  async function processInput(text) {
    if (!text.trim()) return;
    renderMessage("user", text);
    input.value = "";
    const reply = ownBrainResponse(text);
    if (reply) {
      renderMessage("bot", reply);
    } else {
      renderMessage("bot", "‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶õ‡¶ø... ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßã...");
      const googleReply = await fetchFromGoogle(text);
      renderMessage("bot", googleReply);
    }
  }

  sendBtn.addEventListener("click", () => processInput(input.value));
  input.addEventListener("keypress", (e) => {
    if (e.key === "Enter") processInput(input.value);
  });
</script>

</body>
</html>
