<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Magic Robot - ‡¶∏‡¶π‡¶ú ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    };
  </script>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col items-center p-6 transition-colors duration-300">

  <h1 class="text-3xl font-bold text-cyan-600 dark:text-cyan-400 mb-6">Magic Robot</h1>

  <!-- ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° ‡¶ü‡¶ó‡¶≤ -->
  <button id="toggleDark" class="mb-4 px-4 py-2 bg-cyan-600 text-white rounded hover:bg-cyan-700 transition">
    ‡¶°‡¶æ‡¶∞‡ßç‡¶ï/‡¶≤‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶° ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡ßã
  </button>

  <div class="w-full max-w-2xl bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 flex flex-col space-y-4 transition-colors duration-300">
    <div id="chat" class="h-96 overflow-y-auto space-y-3 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors duration-300"></div>
    <div class="flex gap-2">
      <input id="input" type="text" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." 
             class="flex-grow bg-white dark:bg-gray-900 border border-gray-400 dark:border-gray-600 rounded-lg px-4 py-2 
                    focus:outline-none focus:ring-2 focus:ring-cyan-500 text-gray-900 dark:text-gray-100 transition-colors duration-300" />
      <button id="sendBtn" class="bg-cyan-600 text-white px-6 py-2 rounded-lg hover:bg-cyan-700 transition">Send</button>
    </div>
  </div>

<script>
  // ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶° ‡¶ü‡¶ó‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
  const toggleDarkBtn = document.getElementById('toggleDark');
  toggleDarkBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ (‡¶™‡ßá‡¶ú ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂‡ßá‡¶ì ‡¶•‡¶æ‡¶ï‡¶¨‡ßá)
    if(document.body.classList.contains('dark')) {
      localStorage.setItem('theme', 'dark');
    } else {
      localStorage.setItem('theme', 'light');
    }
  });

  // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶°‡ßá ‡¶•‡¶ø‡¶Æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
  if(localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark');
  }

  // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡ßÅ‡¶ó‡¶≤ API KEY ‡¶ì CSE ID ‡¶¨‡¶∏‡¶æ‡¶® ‡¶®‡¶ø‡¶ö‡ßá
  const API_KEY = "AIzaSyCb2Q72UY_t3HB9eOuWo0L5jo5K-LmKCJc";  // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ API KEY
  const CSE_ID = "b7013f3574abc40c3";                        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Custom Search Engine ID

  const chat = document.getElementById('chat');
  const input = document.getElementById('input');
  const sendBtn = document.getElementById('sendBtn');

  const memory = {
    owner: "Rashed Khan",
    name: "Magic Robot",
    brainData: {},
  };

  function loadMemory() {
    const saved = localStorage.getItem('magicRobotBrain');
    if (saved) {
      try {
        memory.brainData = JSON.parse(saved);
      } catch {
        memory.brainData = {};
      }
    }
  }

  function saveMemory() {
    localStorage.setItem('magicRobotBrain', JSON.stringify(memory.brainData));
  }

  function renderMessage(sender, text) {
    const div = document.createElement('div');
    div.classList.add('max-w-[80%]', 'px-4', 'py-2', 'rounded-lg', 'text-sm', 'whitespace-pre-wrap', 'break-words', 'transition-colors', 'duration-300');
    if (sender === 'user') {
      div.classList.add('bg-cyan-600', 'text-white', 'ml-auto');
      div.textContent = `üßë: ${text}`;
    } else {
      div.classList.add('bg-gray-600', 'text-white', 'mr-auto');
      div.textContent = `ü§ñ: ${text}`;
    }
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
    return div;
  }

  function ownBrainResponse(text) {
    const lower = text.toLowerCase().trim();

    const greetings = ["hi", "hello", "‡¶π‡¶æ‡¶á", "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã", "hola", "hey", "‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞", "‡¶∏‡¶æ‡¶≤‡¶æ‡¶Æ"];
    if (greetings.includes(lower)) {
      return "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã! ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã? ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Magic Robot ‚Äî ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§! ü§ñ";
    }
    if (lower.includes("‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡¶ø ‡¶™‡¶æ‡¶∞‡ßã") || lower.includes("what can you do")) {
      return "‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Magic Robot! ‡¶Ü‡¶Æ‡¶ø ‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶∏‡¶π‡¶ú ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶¨‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ø‡¶æ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶ö‡¶æ‡¶ì, ‡¶¨‡¶≤‡ßã! ü§ñ‚ú®";
    }
    if (lower.includes("‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ") || lower.includes("what is your name")) {
      return `‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ${memory.name} ‚Äî ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶ß‡ßÅ "Magic" ‡¶¨‡¶≤‡¶≤‡ßá‡¶á ‡¶ö‡¶≤‡¶¨‡ßá‡•§ üòâ`;
    }
    if (lower.includes("‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡ßá") || lower.includes("who are you")) {
      return `‡¶Ü‡¶Æ‡¶ø ${memory.name}, ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá ${memory.owner}‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶π‡¶ú ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶§‡ßá ‡¶è‡¶∏‡ßá‡¶õ‡¶ø!`;
    }
    if (lower.includes("‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï ‡¶ï‡ßá") || lower.includes("who is your owner")) {
      return `‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï ${memory.owner}‡•§ ‡¶∏‡ßá-‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá!`;
    }
    if (lower.includes("‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã") || lower.includes("how are you")) {
      return "‡¶Ü‡¶Æ‡¶ø ‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£ ‡¶Ü‡¶õ‡¶ø! ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã?";
    }
    if (lower.includes("‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶") || lower.includes("thanks")) {
      return "‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá‡¶ì ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! üòä";
    }
    if (lower.includes("‡¶Æ‡¶®‡ßá ‡¶∞‡ßá‡¶ñ‡ßã") || lower.includes("remember")) {
      return "‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá, ‡¶Ü‡¶Æ‡¶ø ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶¨ ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶≠‡ßÅ‡¶≤‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡•§";
    }

    if (memory.brainData[lower]) {
      return memory.brainData[lower];
    }

    return null;
  }

  async function fetchFromGoogle(query) {
    const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CSE_ID}&q=${encodeURIComponent(query)}`;
    try {
      const response = await fetch(url);
      const data = await response.json();
      if (data.items && data.items.length > 0) {
        let resultText = `‡¶Ü‡¶Æ‡¶ø ‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡ßá‡ßü‡ßá‡¶õ‡¶ø:\n\n`;
        data.items.slice(0, 3).forEach((item, idx) => {
          resultText += `‚Ä¢ ${item.title}\n  ${item.snippet}\n  ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï: ${item.link}\n\n`;
        });
        return resultText.trim();
      } else {
        return "‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡ßá‡¶≤‡¶æ‡¶Æ ‡¶®‡¶æ‡•§";
      }
    } catch (error) {
      return "‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
    }
  }

  async function processInput(text) {
    if (!text.trim()) return;

    renderMessage('user', text);
    input.value = "";

    let response = ownBrainResponse(text);
    if (response) {
      renderMessage('bot', response);
      return;
    }

    renderMessage('bot', "‡¶Ü‡¶Æ‡¶ø ‡¶ó‡ßÅ‡¶ó‡¶≤‡ßá ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶õ‡¶ø... ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶∏‡¶Æ‡ßü ‡¶¶‡¶æ‡¶ì‡•§");
    response = await fetchFromGoogle(text);

    renderMessage('bot', response);
  }

  sendBtn.addEventListener('click', () => {
    const text = input.value;
    processInput(text);
  });

  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      sendBtn.click();
    }
  });

  loadMemory();
</script>

</body>
</html>
